<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Users | Admin - ExpenseTracker</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body class="dashboard-body">

<div class="dashboard-wrapper">

    <!-- ================= LEFT SIDEBAR (ADMIN) ================= -->
    <div th:replace="fragments/sidebar-admin :: adminSidebar"></div>

    <!-- ================= RIGHT MAIN ================= -->
    <main class="main-content">

        <!-- TOP BAR -->
        <div class="topbar">
            <div class="d-flex align-items-center gap-3">
                <button class="btn btn-light d-lg-none" id="sidebarToggle">
                    <i class="bi bi-list"></i>
                </button>
                <h4 class="mb-0">Users</h4>
            </div>

            <div class="user-info">
                <i class="bi bi-shield-lock"></i>
                <span>Admin</span>
            </div>
        </div>

        <!-- ================= USERS TABLE ================= -->
        <div class="card shadow-sm">
            <div class="card-body">

                <h5 class="mb-3">
                    <i class="bi bi-people"></i> Registered Users
                </h5>

                <div class="table-responsive">
                    <table class="table table-striped align-middle">
                        <thead class="table-light">
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr th:each="user, stat : ${users}">
                            <td th:text="${stat.count}">1</td>
                            <td th:text="${user.name}">Name</td>
                            <td th:text="${user.email}">Email</td>
                            <td>
                                <span class="badge bg-secondary"
                                      th:if="${user.role.name() == 'USER'}">
                                    USER
                                </span>
                                <span class="badge bg-danger"
                                      th:if="${user.role.name() == 'ADMIN'}">
                                    ADMIN
                                </span>
                            </td>
                        </tr>

                        <tr th:if="${#lists.isEmpty(users)}">
                            <td colspan="4" class="text-center text-muted">
                                No users found
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>

    </main>
</div>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/slidebar.js}"></script>

</body>
</html>
